var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var b={},c=Object.create(new $jscomp.global.Proxy(b,{get:function(d,e,g){return d==b&&"q"==e&&g==c}}));return!0===c.q}catch(d){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;
$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.arrayIteratorImpl=function(b){var c=0;return function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,d){b!=Array.prototype&&b!=Object.prototype&&(b[c]=d.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(b,c){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};
$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function b(d){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(d||"")+"_"+c++,d)}var c=0;return b}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.makeIterator=function(b){var c="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return c?c.call(b):$jscomp.arrayIterator(b)};$jscomp.owns=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)};$jscomp.polyfill=function(b,c,d,e){if(c){d=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var g=b[e];g in d||(d[g]={});d=d[g]}b=b[b.length-1];e=d[b];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("WeakMap",function(b){function c(){if(!b||!Object.seal)return!1;try{var a=Object.seal({}),k=Object.seal({}),c=new b([[a,2],[k,3]]);if(2!=c.get(a)||3!=c.get(k))return!1;c.delete(a);c.set(k,4);return!c.has(a)&&4==c.get(k)}catch(n){return!1}}function d(){}function e(a){var h=typeof a;return"object"===h&&null!==a||"function"===h}function g(a){if(!$jscomp.owns(a,f)){var h=new d;$jscomp.defineProperty(a,f,{value:h})}}function l(a){var h=Object[a];h&&(Object[a]=function(a){if(a instanceof
d)return a;g(a);return h(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(c())return b;var f="$jscomp_hidden_"+Math.random();l("freeze");l("preventExtensions");l("seal");var m=0,a=function(a){this.id_=(m+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};a.prototype.set=function(a,b){if(!e(a))throw Error("Invalid WeakMap key");g(a);if(!$jscomp.owns(a,f))throw Error("WeakMap key fail: "+
a);a[f][this.id_]=b;return this};a.prototype.get=function(a){return e(a)&&$jscomp.owns(a,f)?a[f][this.id_]:void 0};a.prototype.has=function(a){return e(a)&&$jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};a.prototype.delete=function(a){return e(a)&&$jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return a},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(b){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new b($jscomp.makeIterator([[a,"s"]]));if("s"!=c.get(a)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var k=c.entries(),d=k.next();if(d.done||d.value[0]!=a||"s"!=d.value[1])return!1;d=k.next();return d.done||4!=d.value[0].x||"t"!=d.value[1]||!k.next().done?!1:!0}catch(n){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(c())return b;$jscomp.initSymbolIterator();var d=new WeakMap,e=function(a){this.data_={};this.head_=f();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};e.prototype.set=function(a,b){a=0===a?0:a;var c=g(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};e.prototype.delete=function(a){a=g(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};e.prototype.has=function(a){return!!g(this,a).entry};
e.prototype.get=function(a){return(a=g(this,a).entry)&&a.value};e.prototype.entries=function(){return l(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return l(this,function(a){return a.key})};e.prototype.values=function(){return l(this,function(a){return a.value})};e.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=function(a,b){var c=b&&typeof b;"object"==
c||"function"==c?d.has(b)?c=d.get(b):(c=""+ ++m,d.set(b,c)):c="p_"+b;var e=a.data_[c];if(e&&$jscomp.owns(a.data_,c))for(a=0;a<e.length;a++){var f=e[a];if(b!==b&&f.key!==f.key||b===f.key)return{id:c,list:e,index:a,entry:f}}return{id:c,list:e,index:-1,entry:void 0}},l=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},f=function(){var a={};return a.previous=
a.next=a.head=a},m=0;return e},"es6","es3");
var Common=function(){var b="B KB MB GB TB PB EB ZB YB".split(" ");return{renderSize:function(c){if(null==c||""==c)return"0 Bytes";var d=parseFloat(c);c=Math.floor(Math.log(d)/Math.log(1024));d/=Math.pow(1024,c);d=d.toFixed(2);return d+b[c]},removePostfix:function(c){var b=c.lastIndexOf(".");0<b&&(c=c.substring(0,b));return c},initTooltip:function(){$('[data-toggle="tooltip"]').tooltip()},writeCookie:function(b,d){$.cookie(b,d,{expires:9999})},cookieIfPresent:function(b,d){(b=$.cookie(b))&&d(b)},
render:function(b,d){b.content||(b.content=$(b.name).html().trim(),Mustache.parse(b.content));return Mustache.render(b.content,d)},ts:function(){return Math.round((new Date).getTime()/1E3).toString()}}}();$(function(){$.cookie.json=!0;toastr.options.closeButton=!0;Common.initTooltip()});
var ChatServerArray=[{name:"bilibili",value:"chat.bilibili.com"},{name:"\u4f18\u9177",value:"service.danmu.youku.com"},{name:"\u7231\u5947\u827a",value:"cmts.iqiyi.com"},{name:"\u817e\u8baf",value:"mfm.video.qq.com"},{name:"\u7b2c\u4e00\u5f39",value:"api.diyidan.net"},{name:"\u52a8\u753b\u75af",value:"ani.gamer.com.tw"},{name:"AcFun",value:"danmu.aixifan.com"},{name:"\u641c\u72d0",value:"api.danmu.tv.sohu.com"}],Server=function(){var b;return{list:["dmrepository/list"],getKey:function(){b||(b=CryptoJS.enc.Utf8.parse("HW18mCuEW72sjQoRm5OREM7S3qy3ZBgFV8EqPAP6jsZJLpfaglQ9rNwmhlC7k"));
return b}}}(),Searcher=function(){function b(a){a=CryptoJS.AES.decrypt(a,Server.getKey(),{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7});return CryptoJS.enc.Utf8.stringify(a).toString()}function c(a,b,c){var e=new Map;Server.list.forEach(function(h,g){var k=h.indexOf("/"),l=h.substring(0,k),n=h.substring(k+1);f.has(h)?(k=f.get(h),e.set(h,k.size),d(h,l,n,g+1,e,k,a,b,c)):$.ajax({url:"https://"+l+".github.io/"+n+"/index"}).done(function(k){k=k.split(",");var m=new Map;k.forEach(function(a){return m.set(a,
void 0)});f.set(h,m);e.set(h,m.size);d(h,l,n,g+1,e,m,a,b,c)}).fail(function(a){toastr.error("\u8bf7\u6c42\u5f39\u5e55\u670d\u52a1\u5668\uff1a"+h+" \u65f6\uff0c\u53d1\u751f\u9519\u8bef\uff01");console.error(a)})})}function d(a,c,d,f,g,m,p,q,r){var h=0;m.forEach(function(k,n){h++;if(k)l(p,c,n,k,q),e(a,f,g,h,r);else{var t=h;$.ajax({url:"https://"+c+".github.io/"+d+"/"+n}).done(function(a){a=b(a).split(";").map(function(a){return a.split(",")});m.set(n,a);l(p,c,n,a,q)}).fail(function(a){toastr.error("\u8bf7\u6c42\u5f39\u5e55\u4ed3\u5e93\uff1a"+
repo+" \u65f6\uff0c\u53d1\u751f\u9519\u8bef\uff01");console.error(a)}).always(function(){e(a,f,g,t,r)})}})}function e(a,b,c,d,e){c.get(a)==d&&c.delete(a);b==Server.list.length&&0==c.size&&e()}function g(a){var b="\u672a\u77e5";a<ChatServerArray.length&&(b=ChatServerArray[a].name);return b}function l(a,b,c,d,e){var f=[];d.forEach(function(d){var e=d[0];if(-1<e.toLowerCase().indexOf(a)){var h="https://cdn.jsdelivr.net/gh/"+b+"/"+c+"/"+d[3]+".7z";f.push({name:e,from:g(d[2]),length:d[1],operate:m,url:h})}});
0<f.length&&e(f)}var f=new Map,m=$("#button-download").html().trim();return{search:function(a,b,d){c(a,b,d)}}}();
$(function(){function b(b){b.forEach(function(b){0==b.name.indexOf("[\u5f39\u5e55\u5305]")&&$("#danmu-pkg").removeClass("d-none")});e.bootstrapTable("append",b);e.bootstrapTable("hideLoading")}function c(){e.bootstrapTable("hideLoading");l.attr("disabled",!1)}var d=$("#txt-keyword"),e=$("#table"),g=$("#ckb-copy"),l=$("#main-form");Common.cookieIfPresent("search",function(b){g.attr("checked",b.downloadCopy)});g.change(function(){var b=g.is(":checked");Common.writeCookie("search",{downloadCopy:b})});
$("#btn-search").click(function(){e.bootstrapTable("removeAll");var f=d.val().trim();0<f.length&&(l.attr("disabled",!0),e.bootstrapTable("showLoading"),Searcher.search(f.toLowerCase(),b,c))})});
